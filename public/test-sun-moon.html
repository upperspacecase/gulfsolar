<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sun/Moon Cycle Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; }
        
        .sky {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            transition: background 0.1s ease;
        }
        
        .sun, .moon {
            position: absolute;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
        
        .sun {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #FFC343 0%, #FFD166 50%, transparent 70%);
            box-shadow: 0 0 60px 20px rgba(255, 195, 67, 0.6), 0 0 100px 40px rgba(255, 195, 67, 0.4);
        }
        
        .moon {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #e2e8f0 0%, #cbd5e1 50%, transparent 70%);
            box-shadow: 0 0 40px 10px rgba(200, 220, 255, 0.4);
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .content {
            position: relative;
            z-index: 10;
            padding: 100px 20px;
            min-height: 800vh;
        }
        
        .section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .debug {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="sky" id="sky">
        <div id="celestial-bodies"></div>
    </div>
    
    <div class="debug">
        <div>Progress: <span id="progress">0.000</span></div>
        <div>Phase: <span id="phase">DAY</span></div>
        <div>Sun: <span id="sun-pos">0, 0</span></div>
        <div>Moon: <span id="moon-pos">0, 0</span></div>
    </div>
    
    <div class="content">
        <div class="section">Scroll down to see the sun/moon cycle</div>
        <div class="section">Morning - Sun rising</div>
        <div class="section">Noon - Sun high</div>
        <div class="section">Afternoon - Sun setting</div>
        <div class="section">Sunset - Sky changing</div>
        <div class="section">Evening - Moon rising</div>
        <div class="section">Night - Stars out</div>
        <div class="section">Dawn - Sun coming back</div>
    </div>

    <script>
        const sky = document.getElementById('sky');
        const celestialBodies = document.getElementById('celestial-bodies');
        const progressEl = document.getElementById('progress');
        const phaseEl = document.getElementById('phase');
        const sunPosEl = document.getElementById('sun-pos');
        const moonPosEl = document.getElementById('moon-pos');
        
        // Create stars
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 60 + '%';
            star.style.animationDelay = Math.random() * 2 + 's';
            celestialBodies.appendChild(star);
        }
        
        // Create sun
        const sun = document.createElement('div');
        sun.className = 'sun';
        celestialBodies.appendChild(sun);
        
        // Create moon
        const moon = document.createElement('div');
        moon.className = 'moon';
        celestialBodies.appendChild(moon);
        
        function update() {
            const scrollY = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const rawProgress = (scrollY / docHeight) * 2;
            const progress = rawProgress % 1;
            
            // Update debug
            progressEl.textContent = progress.toFixed(3);
            phaseEl.textContent = progress < 0.5 ? 'DAY' : 'NIGHT';
            
            // Background colors
            if (progress < 0.1) {
                sky.style.background = 'linear-gradient(to bottom, #f97316, #fcd34d, #fde68a)';
            } else if (progress < 0.4) {
                sky.style.background = 'linear-gradient(to bottom, #38bdf8, #0ea5e9, #38bdf8)';
            } else if (progress < 0.5) {
                sky.style.background = 'linear-gradient(to bottom, #f97316, #dc2626, #fbbf24)';
            } else if (progress < 0.6) {
                sky.style.background = 'linear-gradient(to bottom, #1e1b4b, #312e81, #1e1b4b)';
            } else if (progress < 0.9) {
                sky.style.background = 'linear-gradient(to bottom, #0f0a1f, #1e1b4b, #0f0a1f)';
            } else {
                sky.style.background = 'linear-gradient(to bottom, #f97316, #fcd34d, #fde68a)';
            }
            
            // Show/hide stars
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                if (progress > 0.55 && progress < 0.95) {
                    star.style.opacity = '1';
                } else {
                    star.style.opacity = '0';
                }
            });
            
            // Sun position
            if (progress < 0.5) {
                const sunProgress = progress * 2;
                const sunX = -10 + sunProgress * 120;
                const normalizedSun = (sunProgress - 0.5) * 2;
                const sunArc = 1 - normalizedSun * normalizedSun;
                const sunY = 100 - sunArc * 70;
                
                sun.style.left = sunX + '%';
                sun.style.top = sunY + '%';
                sun.style.display = 'block';
                sunPosEl.textContent = `${sunX.toFixed(1)}%, ${sunY.toFixed(1)}%`;
            } else {
                sun.style.display = 'none';
                sunPosEl.textContent = 'Hidden';
            }
            
            // Moon position
            if (progress >= 0.5) {
                const moonProgress = (progress - 0.5) * 2;
                const moonX = -10 + moonProgress * 120;
                const normalizedMoon = (moonProgress - 0.5) * 2;
                const moonArc = 1 - normalizedMoon * normalizedMoon;
                const moonY = 100 - moonArc * 70;
                
                moon.style.left = moonX + '%';
                moon.style.top = moonY + '%';
                moon.style.display = 'block';
                moonPosEl.textContent = `${moonX.toFixed(1)}%, ${moonY.toFixed(1)}%`;
            } else {
                moon.style.display = 'none';
                moonPosEl.textContent = 'Hidden';
            }
            
            requestAnimationFrame(update);
        }
        
        update();
    </script>
</body>
</html>
